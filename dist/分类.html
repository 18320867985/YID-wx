<!DOCTYPE html>
<html lang="zh-CN">

	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0,minimum-scale=1.0, user-scalable=no" />
		<meta name="Keywords" content="" />
		<meta name="Description" content="" />
		<title>分类</title>
		<link rel="stylesheet" type="text/css" href="css/cstfont/iconfont.css" />
		<link rel="stylesheet" href="css/all.css" />
	</head>

	<body>

		<!--头部-->
		<header class="head prodclass-head mui-bar  mui-bar-nav topBottomTab-top">
			<a class=" mui-icon iconfont icon-back mui-pull-left"></a>
			<h1 class="mui-title">
		    	<input type="search" name="" id="" value="" placeholder="输入关键字" data-toggle="skip" data-url="搜索页.html" />
		    </h1>
			<span class="head-right-btn"> 搜索</span>
		</header>

		<!-- 底部--->
		<nav class="footer mui-bar mui-bar-tab topBottomTab-bottom">
			
			<a class="mui-tab-item " href="index.html">
				<span class="mui-icon iconfont icon-home"></span>
				<span class="mui-tab-label">首页</span>
			</a>
			
			<a class="mui-tab-item" href="搜索页.html">
				<span class="mui-icon iconfont  icon-sousuo2"></span>
				<span class="mui-tab-label">搜索</span>
			</a>

			<a class="mui-tab-item mui-active"  href="分类.html" >
				<span class="mui-icon  iconfont icon-menu">
					
				</span>
				<span class="mui-tab-label">全部</span>
			</a>
			<a class="mui-tab-item " href="购物车.html">
				<span class="mui-icon  iconfont icon-shopping">
					<span class="shopcar shopcar-local">0</span>
				</span>
				<span class="mui-tab-label">购物车</span>
			</a>
			<a class="mui-tab-item " href="我的.html">
				<span class="mui-icon  iconfont icon-geren"></span>
				<span class="mui-tab-label">我的</span>
			</a>
		</nav>

		<!--主体内容-->
		<section class="mui-content topBottomTab-content">

			<div class="topBottomTab-menu  mui-row  tab-big">

				<div class=" topBottomTab-menu-ttl  width-2">
					<ul class="tab-ttl">
						<li class="active">
							<a class="tab-item" href="javascript:;" data-page="10"  data-type="1" data-target="#a1">奶粉</a>
						</li>
						<li>
							<a class="tab-item" href="javascript:;"  data-page="2" data-type="2" data-target="#a2">婴儿食品</a>
						</li>
						<li>
							<a class="tab-item" href="javascript:;" data-page="5"  data-type="2"  data-target="#a3">童鞋/童装</a>
						</li>
						<li>
							<a class="tab-item" href="javascript:;"  data-page="5"  data-type="1"  data-target="#a4">尿裤湿巾</a>
						</li>
						<li>
							<a class="tab-item" href="javascript:;"  data-page="5"  data-type="2"  data-target="#a5">妈妈专区</a>
						</li>

					</ul>
				</div>

				<div class=" topBottomTab-menu-content  width-8  prodclass-cont tab-content">

					<div class="tab-content-item   pullToRefresh-big active" id="a1">
						<!--奶粉-->
						<div class="item">
							<h4 class="ttl-1"></h4>
							<div class="mui-row mui-clearfix pullToRefresh-box">
								<!--							
								<div class="mui-col-xs-4">
									<img src="images/1段奶粉.png" alt="" />
									<h5>一段奶粉</h5>
								</div>-->
								<!--<div class="mui-col-xs-4">
									<img src="images/2段奶粉.png" alt="" />
									<h5>二段奶粉</h5>

								</div>
								<div class="mui-col-xs-4">

									<img src="images/3段奶粉.png" alt="" />
									<h5>三段奶粉</h5>
								</div>
								<div class="mui-col-xs-4">
									<img src="images/4断乃恩.png" alt="" />
									<h5>四段奶粉</h5>
								</div>
								<div class="mui-col-xs-4">
									<img src="images/妈妈奶粉.png" alt="" />
									<h5>妈妈奶粉</h5>

								</div>
								<div class="mui-col-xs-4">

									<img src="images/婴儿奶粉.png" alt="" />
									<h5>婴儿奶粉</h5>
								</div>-->

							</div>

						</div>
					</div>

					<!--婴儿食品-->
					<div class="tab-content-item " id="a2">
						<div class="item">

							<h4 class="ttl-1"></h4>
							<div class="mui-row mui-clearfix pullToRefresh-box">

							</div>

						</div>

					</div>

					<!--童鞋/童装-->
					<div class="tab-content-item " id="a3">
						<div class="item">

							<h4 class="ttl-1"></h4>
							<div class="mui-row mui-clearfix pullToRefresh-box">

							</div>

						</div>

					</div>
					
					<!--尿裤湿巾-->
					<div class="tab-content-item " id="a4">
						<div class="item">

							<h4 class="ttl-1"></h4>
							<div class="mui-row mui-clearfix pullToRefresh-box">

							</div>

						</div>

					</div>
					
					<!--妈妈专区-->
					<div class="tab-content-item " id="a5">
						<div class="item">

							<h4 class="ttl-1"></h4>
							<div class="mui-row mui-clearfix pullToRefresh-box">

							</div>

						</div>

					</div>
					
					
				</div>

			</div>

		</section>

		<!--模板-->
		<script type="text/template" id="handlebars-templete">

			{{#lists}}
			<div class="mui-col-xs-4">
				<a href="商品详情.html">
					<img class="load-lazy" src="images/lazy.jpg" alt=""  data-src="{{img}}"/>
					<h5>{{ttl}}</h5>
				</a>
				
			</div>
			{{/lists}}

		</script>

		<script src="js/config.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/all.js " type="text/javascript " charset="utf-8 "></script>
		<script src="js/handlebars-v4.0.8.min.js" type="text/javascript" charset="utf-8"></script>

		<script type="text/javascript">
			$(function() {
				
				wxLazy.init(); // 图片延迟加载	
				
				// 上下拖拉菜单
				//点击事件
				$(".tab-item").on("tab_select", function(event, element) {
					//element 当前点击的元素	
					var _id = $(element).attr("data-page")||5;
					var _type = $(element).attr("data-type")||1;
					var _bl = $(element).attr("data-bl");
					var _targetId = $(element).attr("data-target");
					var _cont = $(".pullToRefresh-box", _targetId)
					//alert(_targetId)
					if(_bl === undefined) {
						$(element).attr("data-bl", true);

						// 加载icon动画
						var _load = document.createElement("span");
						var _load2 = document.createElement("span");
						var _load3 = document.createElement("span");
						_load.classList.add("load-pullToRefresh");
						_load2.classList.add("iconfont");
						_load2.classList.add("icon-jiazai");
						_load2.classList.add("spin");
						_load3.innerText = "加载中...";
						_load.appendChild(_load2);
						_load.appendChild(_load3);
						_cont.html(_load);
					
						//	setTimeout(function() {
							_cont.find(".load-pullToRefresh").css("display", "none");
							//_cont.append(html);
							$(_targetId).find(".ttl-1").text($(element).text()); 	// h4的标题文本设置
							
							getData(1, Number(_id), _targetId, {},_type,function(){
								wxLazy.reset(); // 重新执行 图片延迟加载
							});  				


						//}, 1000);

					}

				});

				// 分页
				mui.ready(function() {
					// 第一次加载
					$(".topBottomTab-menu-ttl .tab-ttl .tab-item").eq(0).trigger("tap");
				});

				// ajax 分页
				function getData(indexPage, allPage, pullToRefreshBig, obj,_type,fn,olddata) {

					muiPullToRefresh.init({
						indexPage: indexPage, // 当前页
						maxPage: allPage, // 总共页数
						pullToRefreshBig: pullToRefreshBig, // 上拉的大框
						pullToRefreshBox: ".pullToRefresh-box", // 上拉的加载框
						url: "json/prodclass.json", // ajax url
						showText: { // 上拉 的文本
							init: "上拉显示更多",
							down: "上拉显示更多",
							refresh: "正在加载...",
							nomore: "没有更多数据了"
						},
						obj: obj, // ajax 参数
						fn: function(data) {
							data = data.constructor === Array ? data : JSON.parse(data);
							data=com.list.where(data,function(item){
								
								return item.type==_type;
							});

							var template = Handlebars.compile(document.getElementById("handlebars-templete").innerHTML);
							var html = template({
								lists: data
							});

							$(".load").css("display", "none");
							$(this.pullToRefreshBig).find(this.pullToRefreshBox).append(html);

						}
					},fn,olddata);

				}

			});
		</script>

	</body>

</html>